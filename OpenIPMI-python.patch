--- OpenIPMI-2.0.7/swig/python/openipmigui/Makefile.am.orig	2006-06-08 05:10:43.000000000 +0200
+++ OpenIPMI-2.0.7/swig/python/openipmigui/Makefile.am	2006-08-22 12:20:57.085971000 +0200
@@ -26,7 +26,7 @@
 	$(INSTALL) -d $(DESTDIR)$(PYTHON_INSTALL_DIR)/openipmigui
 	$(INSTALL_PROGRAM) $^ $(DESTDIR)$(PYTHON_INSTALL_DIR)/openipmigui
 
-PYPATH=$(top_builddir)/swig/python:$(srcdir)
+PYPATH=$(top_builddir)/swig/python:$(top_builddir)/swig/python/.libs:$(srcdir)
 PYLDPATH=$(top_builddir)/lib/.libs:$(top_builddir)/utils/.libs:$(top_builddir)/glib/.libs:$(top_builddir)/unix/.libs:$(top_builddir)/cmdlang/.libs:$(top_builddir)/tcl/.libs
 
 .py.pyc:
--- OpenIPMI-2.0.7/swig/python/Makefile.am.orig	2006-04-06 16:13:47.000000000 +0200
+++ OpenIPMI-2.0.7/swig/python/Makefile.am	2006-08-22 12:20:35.075971000 +0200
@@ -5,20 +5,15 @@
 	    -I $(top_builddir) \
 	    -I $(top_builddir)/include \
 	    -I $(top_srcdir)/include \
-	    -I $(top_srcdir)/swig/python
+	    -I $(top_srcdir)/swig/python \
+	    -Wall -DPYTHON_HAS_POSIX_THREADS=@PYTHON_HAS_POSIX_THREADS@ @DEFS@
 
-CC = @CC@ -Wall
-CFLAGS = @CFLAGS@ -fPIC -DPYTHON_HAS_POSIX_THREADS=@PYTHON_HAS_POSIX_THREADS@
-DEFS = @DEFS@
+pythonlibdir=$(PYTHON_INSTALL_DIR)
+pythonlib_LTLIBRARIES = _OpenIPMI.la
+_OpenIPMI_la_SOURCES = OpenIPMI_wrap.c
+_OpenIPMI_la_LDFLAGS = -module -avoid-version
 
-COMPILE = $(CC) $(DEFS) $(AM_CFLAGS) $(CFLAGS)
-
-all-local: _OpenIPMI.so
-
-OpenIPMI_SRC = OpenIPMI_wrap.c
-OpenIPMI_OBJ = OpenIPMI_wrap.o
-
-OpenIPMI_LIB = @PYTHON_POSIX_LIB@ \
+_OpenIPMI_la_LIBADD = @PYTHON_POSIX_LIB@ \
 	       $(top_builddir)/lib/libOpenIPMI.la \
 	       $(top_builddir)/utils/libOpenIPMIutils.la \
 	       $(top_builddir)/cmdlang/libOpenIPMIcmdlang.la \
@@ -26,31 +21,20 @@
 
 EXTRA_DIST = OpenIPMI_lang.i OpenIPMI.h openipmigui.py
 
-_OpenIPMI.so: $(OpenIPMI_OBJ)
-	$(LIBTOOL) --mode=link $(CC) -shared -o $@ $^ $(OpenIPMI_LIB) \
-		-R/$(libdir)
-	rm _OpenIPMI.so
-	mv .libs/_OpenIPMI.so .
-	rm -rf .libs
-
-OpenIPMI_wrap.o OpenIPMI.py: OpenIPMI_wrap.c OpenIPMI.h
-	$(COMPILE) -c $<
-
-OpenIPMI.pyc: OpenIPMI.py _OpenIPMI.so
+OpenIPMI.pyc: OpenIPMI.py _OpenIPMI.la
 	-$(pythonprog) -c 'import OpenIPMI.py'
 
-OpenIPMI.pyo: OpenIPMI.py _OpenIPMI.so
+OpenIPMI.pyo: OpenIPMI.py _OpenIPMI.la
 	-$(pythonprog) -O -c 'import OpenIPMI.py'
 
 OpenIPMI_wrap.c: $(top_srcdir)/swig/OpenIPMI.i OpenIPMI_lang.i
 	$(SWIG) $(DEFS) -python -o $@ -I$(top_srcdir)/swig/python $<
 
-CLEANFILES = $(OpenIPMI_OBJ) _OpenIPMI.so OpenIPMI_wrap.c \
+CLEANFILES = OpenIPMI.lo _OpenIPMI.la OpenIPMI_wrap.c \
 	OpenIPMI.py OpenIPMI.pyo OpenIPMI.pyc
 
-install-exec-local: _OpenIPMI.so OpenIPMI.py OpenIPMI.pyc OpenIPMI.pyo
+install-exec-local: _OpenIPMI.la OpenIPMI.py OpenIPMI.pyc OpenIPMI.pyo
 	$(INSTALL) -d $(DESTDIR)$(PYTHON_INSTALL_DIR)
-	$(LIBTOOL) --mode=install $(INSTALL_PROGRAM) _OpenIPMI.so $(DESTDIR)$(PYTHON_INSTALL_DIR)
 	$(INSTALL_PROGRAM) OpenIPMI.py $(DESTDIR)$(PYTHON_INSTALL_DIR)
 	$(INSTALL_PROGRAM) OpenIPMI.pyc $(DESTDIR)$(PYTHON_INSTALL_DIR)
 	$(INSTALL_PROGRAM) OpenIPMI.pyo $(DESTDIR)$(PYTHON_INSTALL_DIR)
@@ -59,7 +43,7 @@
 	    $(INSTALL_PROGRAM) openipmigui.py $(DESTDIR)$(bindir)/openipmigui;\
 	fi
 
-PYPATH=$(top_builddir)/swig/python
+PYPATH=$(top_builddir)/swig/python:$(top_builddir)/swig/python/.libs
 PYLDPATH=$(top_builddir)/lib/.libs:$(top_builddir)/utils/.libs:$(top_builddir)/glib/.libs:$(top_builddir)/unix/.libs:$(top_builddir)/cmdlang/.libs:$(top_builddir)/tcl/.libs
 
 rungui:
